<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø¢Ù¾Ø§Ø¯Ø§Ù†Ø§ â€” Ù†Ø³Ø®Ù‡ Ù†Ù‡Ø§ÛŒÛŒ Ø§ÙˆÙ„ÛŒÙ‡</title>
<style>
/* ====== ÙÙˆÙ†Øª TTF Ø´Ù…Ø§ ======
  @font-face {
    font-family: 'ApadanaFont';
    src: url('data:font/ttf;base64,__REPLACE_BASE64_FONT__') format('truetype');
  }
*/
@font-face {
  font-family: 'ApadanaFont';
  /* ======= Ø¬Ø§ÛŒ Base64 ÙÙˆÙ†Øª Ø¨Ø°Ø§Ø± Ø§ÛŒÙ†Ø¬Ø§ ======= */
}

/* ====== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ CSS ====== */
:root{
  --accent:#FF5E00;
  --bg:#FFF8F0;
  --card:#FFFFFF;
  --muted:#666;
  --radius:14px;
  --maxw:980px;
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family: 'ApadanaFont', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:var(--bg);
  color:#1b1b1b;
  -webkit-font-smoothing:antialiased;
  direction:rtl;
}

/* ===== Header ===== */
.header{
  display:flex;
  align-items:center;
  gap:12px;
  padding:12px;
  background:transparent;
}
.start-btn {
  display:flex;
  align-items:center;
  gap:10px;
  background:linear-gradient(180deg,var(--accent),#e54a00);
  color:#fff;
  border:0;
  padding:10px 14px;
  border-radius:999px;
  font-weight:700;
  cursor:pointer;
  box-shadow:0 8px 20px rgba(255,94,0,0.14);
}
.start-btn .icon {
  width:22px;height:22px;border-radius:6px;background:#fff7;border:0;display:flex;align-items:center;justify-content:center;color:var(--accent);font-weight:700;
}

/* ===== Container Ø§ØµÙ„ÛŒ ===== */
.container{
  max-width:var(--maxw);
  margin:8px auto 90px;
  padding:0 14px 40px;
}

/* ===== Slider ===== */
.slider{
  width:100%;
  height:220px;
  border-radius:16px;
  overflow:hidden;
  position:relative;
  box-shadow:0 8px 30px rgba(0,0,0,0.08);
  margin-bottom:18px;
}
.slides{
  display:flex;
  width:300%;
  height:100%;
  animation: slideAnim 12s linear infinite;
}
.slide{
  width:100%;
  height:100%;
  flex:0 0 100%;
  background-size:cover;
  background-position:center;
}
@keyframes slideAnim{
  0%{transform:translateX(0%);}
  33%{transform:translateX(-100%);}
  66%{transform:translateX(-200%);}
  100%{transform:translateX(0%);}
}
.indicators{
  position:absolute;
  left:12px;
  bottom:12px;
  display:flex;
  gap:8px;
}
.indicators button{
  width:9px;height:9px;border-radius:50%;border:0;background:rgba(255,255,255,0.6);cursor:pointer;
}
.indicators button.active{ background:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.2); }

/* ===== Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ / Ù¾Ø§ØªÙˆÙ‚â€ŒÙ‡Ø§ ===== */
.actions-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(160px,1fr));
  gap:14px;
  margin-top:10px;
}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:12px;
  min-height:200px;
  display:flex;
  flex-direction:column;
  align-items:center;
  box-shadow:0 10px 30px rgba(0,0,0,0.05);
  transition:transform .18s ease, box-shadow .18s ease;
}
.card:hover{ transform: translateY(-6px); box-shadow:0 20px 40px rgba(0,0,0,0.08); }
.card .thumb{
  width:120px;height:120px;border-radius:12px;background:#f2f2f2;margin-bottom:10px;object-fit:cover;
}
.card h4{ margin:6px 0; font-size:16px; text-align:center; }
.card p{ color:var(--muted); font-size:13px; text-align:center; min-height:36px; margin:0 0 10px; }

/* Ø¯Ú©Ù…Ù‡ Ú©Ø´Ù Ú©Ù† */
.discover {
  margin-top:auto;
  width:100%;
  padding:10px;
  background:var(--accent);
  color:#fff;border:0;border-radius:10px;font-weight:700;cursor:pointer;
}

/* ===== Footer Ø«Ø§Ø¨Øª ===== */
.footer {
  position:fixed;
  bottom:12px;
  left:12px;
  right:12px;
  max-width:var(--maxw);
  margin:0 auto;
  height:64px;
  background:#fff;
  border-radius:999px;
  box-shadow:0 12px 30px rgba(0,0,0,0.12);
  display:flex;
  align-items:center;
  justify-content:space-around;
  padding:8px 12px;
  z-index:999;
}
.footer .fbtn{
  display:flex; flex-direction:column; align-items:center; gap:6px;
  background:transparent; border:0; cursor:pointer; color:#333; font-size:12px;
}
.footer .fbtn .fi{ width:26px;height:26px;border-radius:8px;background:#FFF6; display:flex; align-items:center; justify-content:center; }

/* ===== Modal Ø¬Ø²Ø¦ÛŒØ§Øª ===== */
.overlay{ display:none; position:fixed; inset:0; background:rgba(0,0,0,0.55); z-index:1000; align-items:center; justify-content:center; padding:20px; }
.overlay.show{ display:flex; }
.modal{ width:100%; max-width:720px; background:#fff; border-radius:12px; padding:18px; box-shadow:0 20px 60px rgba(0,0,0,0.3); }
.modal .head{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
.modal img{ width:100%; max-height:320px; object-fit:cover; border-radius:10px; margin-bottom:12px; }

/* responsive */
@media (max-width:420px){
  .start-btn{ padding:8px 12px; font-size:15px; }
  .card .thumb{ width:100px;height:100px; }
  .footer{ height:72px; padding:10px; }
}
</style>
</head>
<body>

<header class="header">
  <div class="left">
    <button class="start-btn" id="startBtn" title="Ø´Ø±ÙˆØ¹ Ú©Ù†!">
      <span class="icon" id="startIcon">âœˆ</span>
      <span>Ø´Ø±ÙˆØ¹ Ú©Ù†!</span>
    </button>
  </div>
</header>

<div class="container">
  <!-- Ø§Ø³Ù„Ø§ÛŒØ¯Ø± -->
  <div class="slider" id="slider">
    <div class="slides" id="slides">
      <div class="slide" style="background-image:url('__REPLACE_IMG_SLIDE_1__')"></div>
      <div class="slide" style="background-image:url('__REPLACE_IMG_SLIDE_2__')"></div>
      <div class="slide" style="background-image:url('__REPLACE_IMG_SLIDE_3__')"></div>
    </div>
    <div class="indicators" id="indicators">
      <button data-i="0" class="active"></button>
      <button data-i="1"></button>
      <button data-i="2"></button>
    </div>
  </div>

  <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ -->
  <section>
    <h3 style="margin:14px 0 6px 0; padding-left:6px">Ù¾Ø§ØªÙˆÙ‚â€ŒÙ‡Ø§</h3>
    <div class="actions-grid" id="actionsGrid">
      <!-- Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø¨Ø§ JS Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´Ù† -->
    </div>
  </section>
</div>

<nav class="footer" role="navigation" aria-label="Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù¾Ø§ÛŒÛŒÙ†">
  <button class="fbtn" data-action="home"><div class="fi">ğŸ </div><div>Ø®Ø§Ù†Ù‡</div></button>
  <button class="fbtn" data-action="actions"><div class="fi">ğŸ—‚ï¸</div><div>Ù¾Ø§ØªÙˆÙ‚â€ŒÙ‡Ø§</div></button>
  <button class="fbtn" data-action="explore"><div class="fi">ğŸ”</div><div>Ú©Ø§ÙˆØ´</div></button>
  <button class="fbtn" data-action="profile"><div class="fi">ğŸ‘¤</div><div>Ù¾Ø±ÙˆÙØ§ÛŒÙ„</div></button>
</nav>

<div class="overlay" id="overlay">
  <div class="modal" role="dialog" aria-modal="true" id="modal">
    <div class="head">
      <strong id="modalTitle">Ø¹Ù†ÙˆØ§Ù† Ù¾Ø§ØªÙˆÙ‚</strong>
      <button id="modalClose" aria-label="Ø¨Ø³ØªÙ†">âœ–</button>
    </div>
    <img id="modalImage" src="" alt="ØªØµÙˆÛŒØ± Ù¾Ø§ØªÙˆÙ‚">
    <p id="modalDesc" style="color:#444"></p>
    <div style="display:flex;gap:10px;margin-top:12px;">
      <button id="doAction" class="start-btn" style="flex:1">Ø§Ù†Ø¬Ø§Ù… Ú©Ù† Ùˆ Ø§Ù…ØªÛŒØ§Ø² Ø¨Ú¯ÛŒØ±</button>
      <button id="gotoActionPage" style="flex:1;border-radius:10px;border:1px solid #ddd;background:#fff;">Ù…Ø´Ø§Ù‡Ø¯Ù‡ ØµÙØ­Ù‡Ù” Ù¾Ø§ØªÙˆÙ‚</button>
    </div>
  </div>
</div>

<script>
const ACTIONS = [
  { id:1, title:'Ø¯ÙˆØ¨Ù„Ù‡ Ø¨Ø§Ø­Ø§Ù„', desc:'ØµØ¯Ø§ØªÙˆ Ø¶Ø¨Ø· Ú©Ù† Ùˆ Ø¯ÙˆØ¨Ù„Ù‡ Ú©Ù†!', img:'__REPLACE_ACTION_IMG_1__', points:10 },
  { id:2, title:'Ù†Ù‚Ø§Ø´ÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„', desc:'ÛŒÙ‡ Ø§Ø«Ø± Ú©ÙˆÚ†ÛŒÚ© Ø¨Ø³Ø§Ø²', img:'__REPLACE_ACTION_IMG_2__', points:8 },
  { id:3, title:'ÙˆÛŒØ¯ÛŒÙˆ Ú©ÙˆØªØ§Ù‡', desc:'Ú©Ù„ÛŒÙ¾ Ø¨Ø³Ø§Ø² Ùˆ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†', img:'__REPLACE_ACTION_IMG_3__', points:12 },
];

let USER = JSON.parse(localStorage.getItem('apadana_user')) || { name:null, score:0, history:[] };
function saveUser(){ localStorage.setItem('apadana_user', JSON.stringify(USER)); }

const grid = document.getElementById('actionsGrid');
function renderCards(){
  grid.innerHTML = '';
  ACTIONS.forEach(a=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <img class="thumb" src="${a.img || 'data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=200 height=200><rect rx=12 width=100% height=100% fill=%23f2f2f2/></svg>'}" alt="${a.title}">
      <h4>${a.title}</h4>
      <p>${a.desc}</p>
      <button class="discover" data-id="${a.id}">Ú©Ø´ÙØ´ Ú©Ù†! ğŸ§³</button>
    `;
    grid.appendChild(card);
  });
  document.querySelectorAll('.discover').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id = parseInt(btn.dataset.id);
      openModal(id);
    });
  });
});

const overlay = document.getElementById('overlay');
const modalTitle = document.getElementById('modalTitle');
const modalImage = document.getElementById('modalImage');
const modalDesc = document.getElementById('modalDesc');
const doActionBtn = document.getElementById('doAction');
const gotoActionPageBtn = document.getElementById('gotoActionPage');
let currentAction = null;

function openModal(id){
  const act = ACTIONS.find(x=>x.id===id);
  if(!act) return;
  currentAction = act;
  modalTitle.textContent = act.title;
  modalImage.src = act.img || '';
  modalDesc.textContent = act.desc;
  overlay.classList.add('show');
  doActionBtn.onclick = ()=> {
    if(!USER.name){ promptLogin(); return; }
    USER.score = (USER.score||0) + (act.points||0);
    USER.history = USER.history || [];
    USER.history.push({ id:act.id, title:act.title, at: new Date().toISOString(), points:act.points });
    saveUser();
    alert('Ø¢ÙØ±ÛŒÙ†! '+(act.points||0)+' Ø§Ù…ØªÛŒØ§Ø² Ú¯Ø±ÙØªÛŒ â€” Ø§Ù„Ø§Ù†: ' + USER.score);
    overlay.classList.remove('show');
  };
  gotoActionPageBtn.onclick = ()=> {
    overlay.classList.remove('show');
    showActionPage(act);
  };
}

document.getElementById('modalClose').onclick = ()=> overlay.classList.remove('show');

document.querySelectorAll('.footer .fbtn').forEach(b=>{
  b.addEventListener('click', ()=>{
    const a = b.dataset.action;
    if(a==='home'){ window.scrollTo({top:0, behavior:'smooth'}); }
    else if(a==='actions'){ document.querySelector('.container').scrollIntoView({behavior:'smooth'}); }
    else if(a==='explore'){ alert('ØµÙØ­Ù‡Ù” Ú©Ø§ÙˆØ´ â€” ÙÛŒÚ†Ø±Ø§ÛŒ Ø¨Ø¹Ø¯ÛŒ'); }
    else if(a==='profile'){ openProfile(); }
  });
});

function promptLogin(){
  const name = prompt('Ø§Ø³Ù… Ø®ÙˆØ¯ØªÙˆ Ø¨Ø°Ø§Ø± (Ù…Ø«Ù„Ø§Ù‹: Ø³Ø§Ø±Ø§)') || null;
  if(!name) return;
  USER.name = name;
  USER.score = USER.score || 0;
  USER.history = USER.history || [];
  saveUser();
  renderTopBadge();
}

function openProfile(){
  const name = USER.name || 'Ù…Ù‡Ù…Ø§Ù†';
  const score = USER.score || 0;
  const hist = (USER.history && USER.history.length) ? USER.history.map(h=> `${h.title} (+${h.points})`).join('\n') : 'Ù‡ÛŒÚ†Ú©Ø¯ÙˆÙ…';
  alert(`Ù¾Ø±ÙˆÙØ§ÛŒÙ„:\nØ§Ø³Ù…: ${name}\nØ§Ù…ØªÛŒØ§Ø²: ${score}\nÚ©Ù†Ø´â€ŒÙ‡Ø§:\n${hist}`);
}

function showActionPage(act){
  alert('ØµÙØ­Ù‡Ù” Ù¾Ø§ØªÙˆÙ‚: ' + act.title + '\n' + (act.desc || 'ØªÙˆØ¶ÛŒØ­ÛŒ Ù†ÛŒØ³Øª.'));
}

function renderTopBadge(){
  const hb = document.getElementById('startBtn');
  if(USER && USER.name){
    hb.innerHTML = `<span class="icon">ğŸ‘‹</span><span>Ø³Ù„Ø§Ù…ØŒ ${USER.name.split(' ')[0]}!</span>`;
  } else {
    hb.innerHTML = `<span class="icon">âœˆ</span><span>Ø´Ø±ÙˆØ¹ Ú©Ù†!</span>`;
  }
}

function init(){
  renderTopBadge();
  renderCards();
  USER = JSON.parse(localStorage.getItem('apadana_user')) || USER;
}
init();

document.getElementById('startBtn').addEventListener('click', ()=>{
  if(USER && USER.name){
    document.querySelector('.container').scrollIntoView({behavior:'smooth'});
  } else {
    promptLogin();
    renderTopBadge();
  }
});
</script>
</body>
</html>
